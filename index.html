<!DOCTYPE html>
<html lang="en">
<head>
    <title>The Interactive Web Map</title>
	
	<link rel="stylesheet" href="libs/leaflet/leaflet.css">
	<link rel="stylesheet" href="libs/geoman/leaflet-geoman.css">
	<link rel="stylesheet" href="libs/leaflet/leaflet.draw.css">
	<link rel="stylesheet" href="style.css">
	<link rel="icon" type="image/x-icon" href="icon.ico">
	<link rel="stylesheet" href="libs/marked/github-markdown.css">
	<link rel="stylesheet" href="libs/leaflet/leaflet.groupedlayercontrol.min.css">
	    
</head>
<body>
	<!-- Place headers and logo -->
	<h1>
		The Participative Application of the NB<sup>3</sup> Framework
		<button id="info-btn" title="About the Interactive Web Map" onclick="openReadme()">&#9432;</button>
	</h1>
	<h2 id="authors"><span>C. Arslan et al., 2025</span> </h2>
	<div id="logo"></div>
	
    <!-- Format instructions section when the project runs -->
    <div id="confirmationMessage" style="padding-left: 20px;">	
		<p><span style="font-weight: bold;">Welcome to the Interactive Web Map</span></p>
		<p>This tool streamlines the collaboration in applying the Participative Downscaling Method of the NB<sup>3</sup> Framework to identify spatially-relevant restoration units.</p>
		<p>Users of this tool can add, view, or edit polygons, thus the Nature-based Building Blocks (NB<sup>3</sup>), at any user-specified restoration site.</p>
		<p>The tool complements the framework's application within the EU H2020 Rest-Coast project:</p>
		<p>&emsp;&#x279C; Pre-identified Coastal Units at four coastal restoration pilots are embedded in this tool: load file using &#x1F30A; <b>RC</b></p>
		<p>&emsp;&#x279C; For existing Coastal Units, the stakeholders can collaboratively work on the associated data in &#x1F4C1; <a href="https://drive.google.com/drive/folders/12YRxJpMza34m5XKg1Zfz-BdUYtS_Dnqw?usp=drive_link" target="_blank">the pilots' shared directory</a>: e.g. &#x1F4CA; <a href="https://docs.google.com/spreadsheets/d/1PDHU7e_NG8UjVtrPGO82EdawvDUOoH23Fu00VA2g8nI/edit?usp=drive_link" target="_blank">Ebro Delta's Alfacada Salt Marsh Edge Protection</a></p>
		<p>&emsp;&#x279C; For new Coastal Units, the stakeholders can collaborate on one of the template files in, e.g. &#x1F4C1; <a href="https://drive.google.com/drive/folders/1cbguTtEOuqi3t-uEWU8t9dEGm0jJjnyy?usp=drive_link" target="_blank">the Ebro Delta's shared directory</a>: &#x1F4CA; <a href="https://docs.google.com/spreadsheets/d/11d1CvZ0er3I5USiV8NDNMZXh_Q1y2VDCRkIpflAZzEU/edit?usp=drive_link" target="_blank">The NB<sup>3</sup> Instance Template</a></p>
		<p>New users of this tool can refer to the following articles and report for more detailed information on the design, development, and application of the NB<sup>3</sup> Framework:</p>
		<p>&emsp;1. <a href="https://rest-coast.eu/storage/app/uploads/public/67f/653/8eb/67f6538eb6208362862149.pdf" target="_blank">C. Arslan et al. (2024) in Rest-Coast Task 4.2 Deliverable</a>.</p>
		<p>&emsp;2. <a href="https://doi.org/10.1016/j.nbsj.2025.100259" target="_blank">C. Arslan & J.M. van Loon-Steensma (2025) in Nature-Based Solutions</a>.</p>
		<p>&emsp;3. <a href="https://doi.org/10.1016/j.ocecoaman.2025.107988" target="_blank">C. Arslan et al. (2026) in Ocean & Coastal Management</a>.</p>
		<p>The tool supports the application of the framework beyond coastal landscapes and EU context, which is illustrated by: </p>
		<p>&emsp;&#x279C; the framework's application at peatland and wet forest in collabration with the <a href="https://waterlands.eu/" target="_blank">Waterlands</a>, the sister project of the Rest-Coast: load file using &#x1F438; <b>WL</b></p>
		<p>&emsp;&#x279C; launching a blank map for applying the Participative Downscaling Method across any landscape: load map using &#x1F30D; <b>MAP</b></p>
		<p>The users can locally run and edit shape files contaning the NB<sup>3</sup> instances: load file using &#x1F4C2; <b>DIR</b></p>
		<p><span style="font-weight: bold;">NOTE: </span>After creating a new NB<sup>3</sup> instance on the map:</p>
		<p>&emsp;1. Go to &#x1F4C1; <a href="https://drive.google.com/drive/folders/1tpR72tFvh6z7l4-61kEfUG1BPwvVxRID?usp=drive_link">the shared directory</a>,</p>
		<p>&emsp;2. Copy the link to one of the template files, e.g. &#x1F4CA; <a href="https://docs.google.com/spreadsheets/d/1zbv5aOwSGdqH7s5Gbn5AsTrFnwDjcE_nbzG-fOm6Ci8/edit?usp=drive_link" target="_blank">The NB<sup>3</sup> Instance Template newUnit1</a>,</p>
		<p>&emsp;3. Couple this link to the newly created NB<sup>3</sup> instance, e.g., right click followed by <span style="font-style: italic;">Edit NB3 Unit, </p>
		<p>&emsp;4. Collaborate on the file by identifying biophsyical, ecological, and socio-economic data that is spatially relevant to this unit.</p>
		<p><span style="font-weight: bold;">IMPORTANT: </span>If an existing NB<sup>3</sup> Instance is modified (e.g. metadata, shape...), or a new NB<sup>3</sup> Instance is identified (e.g. by drawing a polygon or loading a shape file):</p>
		<p>&emsp;1.Use Save NB<sup>3</sup> Units button to locally store the most up-to-date version of the shape file.</p>
		<p>&emsp;<span style="font-style: italic;">Save using the default file name, which includes a date stamp for version control, i.e. NB3Units_YYYY-MM-DD_HH-MM.json.</span></p>
		<p>&emsp;2.Upload this new version to the shared project directory at: <a href="https://drive.google.com/drive/folders/1JSzCIyibliyIwvcwSTUYiR5HmEr1-kmi?usp=drive_link" target="_blank">upToDateNB3Units</a></p>
		<p>&emsp;<span style="font-style: italic;">If access is denied, please contact <a href="mailto:cengiz.arslan@wur.nl">cengiz.arslan@wur.nl</a> for folder access permission.</span></p>
	</div>
	
	<!-- Create a div to hold the map -->
	<div id="map"></div>
	
	<!-- Create pilot overview button -->
    <div id="reset-view-button" class="map-btn">&#x1F501; Locations Overview</div>
		
	<!-- Create load locations button for Rest-Coast pilots -->
    <div id="load-locations-btn" class="map-btn">&#x1F30A;RC</div>	
	<!-- Create load locations button for Waterlands pilots -->
    <div id="load-locations-btn-WL" class="map-btn">&#x1F438;WL</div>	
	
	<!-- Create load locations button for local directory -->
    <div id="load-locations-btn-file" class="map-btn">&#x1F4C2;DIR</div>
	
	<!-- Create load locations button for blank map -->
    <div id="load-new-locations-btn" class="map-btn">&#x1F30D;MAP</div>
	
	<!-- Create save locations button -->
    <div id="save-locations-btn" class="map-btn">&#x1F4BE; Save NB<sup>3</sup> Units</div>
	
	<!-- Create geojson file selection button -->
    <div id="file-select-btn" class="map-btn">&#x1F310; Load Shape File</div>
	
	<!-- Create geojson file converter download button -->
	<a href="https://drive.google.com/drive/folders/1ZONu5-67IkI2ga7Z8cLwwIDFyjgub3YC?usp=drive_link" 
	   target = "_blank" 
	   title="Go to shared folder to download the .shp to .geojson converter">
	   <div id="download-shp-to-geojson" class="map-btn">&#x2B07;&#xFE0F;</div>	  
	</a>
	
	<!-- Create done modifying button -->
    <div id="done-editing-btn" class="map-btn">&#x2705; Done Modifying NB<sup>3</sup> Unit</div>
	
	<!-- File input field for initial loading of polygons-->
	<input type="file" id="fileInput" accept=".json" style="display:none;">
	
	<!-- File input field for loading shape files as polygons-->
	<input type="file" id="shapefileInput" accept=".geojson, .zip" style="display:none;">
	
	<script src="libs/leaflet/leaflet.js"></script>
	<script src="libs/leaflet/leaflet.draw.js"></script>
	<script src="libs/turf/turf.min.js"></script>
	<script src="libs/geoman/leaflet-geoman.js"></script>
	<script src="libs/shape/shp.min.js"></script>
	<script src="libs/marked/marked.js"></script>
	<script src="libs/leaflet/leaflet.groupedlayercontrol.min.js"></script>
	<script src="script.js"></script>
</body>
</html>